PLATFORM?=RPI
FUNC?=WLAN
HACK_MONITOR_MODE?=0
KERNEL_VERSION?=5.15.0
INLINE_MODE?=Y
BOUNCE_BUF?=N
RF?=B0
CMD_DEMO?=0
ifeq ($(MODE), RADIO-TEST)
TWT_SUPPORT?=0
else
TWT_SUPPORT?=1
endif
LOW_POWER?=1
ifeq ($(PLATFORM),RPI)
ifeq ($(WLAN_SUPPORT), 1)
FW_LOAD?=PATCH
MODE?=REG
endif

BUS_IF?=SPI
ccflags-y += -DBUS_IF_SPI

ccflags-y += -D CONFIG_NRF700X_RX_NUM_BUFS=63 \
	     -D CONFIG_NRF700X_RX_MAX_DATA_SIZE=1600 \
	     -D CONFIG_NRF700X_ANT_GAIN_2G=0 \
             -D CONFIG_NRF700X_ANT_GAIN_5G_BAND1=0 \
             -D CONFIG_NRF700X_ANT_GAIN_5G_BAND2=0 \
             -D CONFIG_NRF700X_ANT_GAIN_5G_BAND3=0 \
             -D CONFIG_NRF700X_BAND_2G_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_2G_UPPER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_1_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_1_UPPER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_2A_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_2A_UPPER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_2C_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_2C_UPPER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_3_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_3_UPPER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_4_LOWER_EDGE_BACKOFF=0 \
             -D CONFIG_NRF700X_BAND_UNII_4_UPPER_EDGE_BACKOFF=0 \
	     -D CONFIG_NRF700X_STA_MODE \
	     -D CONFIG_NRF700X_REG_DOMAIN=00 \
	     -D CONFIG_NRF700X_TX_MAX_DATA_SIZE=1600 \
	     -D CONFIG_NRF700X_MAX_TX_PENDING_QLEN=18

ifneq ($(FW_LOAD), NONE)
ccflags-y += -DRPU_HARD_RESET_SUPPORT
endif

ifeq ($(HOST_CFG80211), Y)
ccflags-y += -DHOST_CFG80211_SUPPORT
endif

#Enable this flag when C0 RF is being used.
#ccflags-y += -DRPU_RF_C0_SUPPORT

ifeq ($(WLAN_SUPPORT), 1)
ccflags-y += -DRPU_VHT_SUPPORT
ccflags-y += -DRPU_HE_SUPPORT
ccflags-y += -DRPU_BSS_DB_SUPPORT
#ccflags-y += -DDCR14_VALIDATE

#ccflags-y += -DCONFIG_NRF_WIFI_LOW_POWER
#ccflags-y += -DCONFIG_NRF_WIFI_LOW_POWER_DBG

ifeq ($(RF),C0)
ccflags-y += -DC0_CHIP
else
ifeq ($(RF),B0)
ccflags-y += -DB0_CHIP
endif
endif

ccflags-y += -DRPU_32_BIT_DMA_SUPPORT

OBJS += $(OSAL_DIR)/hw_if/hal/src/hpqm.o

ifeq ($(HACK_MONITOR_MODE), 1)
ccflags-y += -DHACK_MONITOR_MODE
OBJS += $(LINUX_SHIM_DIR)/src/monitor.o
endif
endif

ifeq ($(CONFIG), 72)
ccflags-y += -DRPU_CONFIG_72
endif

#Enable this flag, if you need logs support.
#ccflags-y +=    -DDRIVER_DEBUG
#ccflgas-y +=	 -g
endif
